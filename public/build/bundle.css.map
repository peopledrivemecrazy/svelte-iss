{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "Leaflet.svelte",
    "App.svelte"
  ],
  "sourcesContent": [
    "<script>\r\n  import LoadSdk from \"./LoadSdk.svelte\";\r\n  import { createEventDispatcher } from \"svelte\";\r\n\r\n  let L = {};\r\n  let map = \"\";\r\n  const dispatch = createEventDispatcher();\r\n\r\n  export let options;\r\n\r\n  let {\r\n    zoom = 13,\r\n    maxZoom = 19,\r\n    minZoom = 1,\r\n    mapID = \"map\",\r\n    attributionControl = true,\r\n    center = [0, 0],\r\n    markers,\r\n    circles,\r\n    recenter = false,\r\n    scrollWheelZoom = true,\r\n    tilelayers = [\r\n      {\r\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\r\n        attribution:\r\n          '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\r\n      },\r\n    ],\r\n    controls = {\r\n      zoomControl: true,\r\n      position: \"topleft\",\r\n      scale: false,\r\n    },\r\n  } = options;\r\n\r\n  let icon;\r\n  let markersArray = [];\r\n  let circleArray = [];\r\n  let bounds;\r\n  let defaultIcon = {\r\n    iconUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon.png\",\r\n    iconRetinaUrl:\r\n      \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-icon-2x.png\",\r\n    shadowUrl: \"https://unpkg.com/leaflet@1.7.1/dist/images/marker-shadow.png\",\r\n    iconSize: [25, 41],\r\n    iconAnchor: [12, 41],\r\n    popupAnchor: [1, -34],\r\n    tooltipAnchor: [1, -34],\r\n    shadowSize: [41, 41],\r\n  };\r\n\r\n  function initialise() {\r\n    setTimeout(() => {\r\n      L = window[\"L\"];\r\n\r\n      createMap();\r\n\r\n      dispatch(\"ready\");\r\n    }, 1);\r\n  }\r\n  function makePopup(marker, options) {\r\n    marker\r\n      .bindPopup(options.text, {\r\n        closeOnClick: false,\r\n        autoClose: false,\r\n        ...options,\r\n      })\r\n      .addTo(map);\r\n    if (options.isOpen) {\r\n      marker.openPopup();\r\n    }\r\n  }\r\n  function makeTooltip(marker, options) {\r\n    marker.bindTooltip(options.text, { ...options }).addTo(map);\r\n    if (options.isOpen) {\r\n      marker.openTooltip();\r\n    }\r\n  }\r\n  let m = [];\r\n\r\n  export const addMarker = (obj) => {\r\n    // console.log(obj);\r\n\r\n    obj.markers.map((e, i) => {\r\n      if (e.icon) {\r\n        // console.log(e.icon)\r\n        icon = L.icon(e.icon);\r\n      }\r\n\r\n      m[i] = new L.marker([e.lat, e.lng], { icon }).addTo(map);\r\n      if (e.popup) {\r\n        makePopup(m[i], e.popup);\r\n      }\r\n      if (e.tooltip) {\r\n        makeTooltip(m[i], e.tooltip);\r\n      }\r\n    });\r\n  };\r\n\r\n  let added = false;\r\n  export const updateMarkers = (obj) => {\r\n    if (!added) {\r\n      addMarker(obj);\r\n      added = true;\r\n    }\r\n\r\n    obj.markers.map((i, k) => {\r\n      // console.log(i);\r\n      m[k].setLatLng(i).update();\r\n      m[k].addTo(map);\r\n    });\r\n\r\n    // map.panTo(arr[0])\r\n    // console.log(m);\r\n  };\r\n\r\n  export const setZoom = (x = 5) => {\r\n    map.setZoom(x);\r\n  };\r\n  function createMap() {\r\n    map = L.map(mapID, {\r\n      attributionControl,\r\n      zoomControl: controls.zoomControl,\r\n      minZoom,\r\n      maxZoom,\r\n    }).setView(center, zoom);\r\n    m = L.marker([0, 0]);\r\n\r\n    if (tilelayers) {\r\n      tilelayers.map((e) => {\r\n        L.tileLayer(e.url, {\r\n          ...e,\r\n        }).addTo(map);\r\n      });\r\n    }\r\n\r\n    if (!scrollWheelZoom) {\r\n      map.scrollWheelZoom.disable();\r\n    }\r\n\r\n    let controlElement = L.control;\r\n    if (!controls.zoomControl) {\r\n      controlElement().remove();\r\n    }\r\n    if (controls.scale) {\r\n      controlElement.scale({ position: controls.position }).addTo(map);\r\n    }\r\n    if (controls.zoomControl && controls.position) {\r\n      map.removeControl(map.zoomControl);\r\n      controlElement\r\n        .zoom({\r\n          position: controls.position,\r\n        })\r\n        .addTo(map);\r\n    }\r\n\r\n    if (markers) {\r\n      markers.map((e) => {\r\n        markersArray.push([e.lat, e.lng]);\r\n        if (e.icon) {\r\n          icon = L.icon(e.icon);\r\n        } else {\r\n          icon = L.icon(defaultIcon);\r\n        }\r\n        let marker = new L.marker(\r\n          [e.lat, e.lng],\r\n\r\n          { icon }\r\n        );\r\n        if (e.popup) {\r\n          makePopup(marker, e.popup);\r\n        }\r\n        if (e.tooltip) {\r\n          makeTooltip(marker, e.tooltip);\r\n        }\r\n        marker.addTo(map);\r\n      });\r\n    }\r\n    if (circles) {\r\n      circles.map((e) => {\r\n        circleArray.push([e.lat, e.lng]);\r\n        let circle = new L.circle([e.lat, e.lng], { ...e });\r\n        if (e.popup) {\r\n          makePopup(circle, e.popup);\r\n        }\r\n        if (e.tooltip) {\r\n          makeTooltip(circle, e.tooltip);\r\n        }\r\n        circle.addTo(map);\r\n      });\r\n    }\r\n\r\n    if (recenter) {\r\n      if (markersArray.length == 1) {\r\n        map.panTo(L.latLng(markersArray[0][0], markersArray[0][1]));\r\n        map.setZoom(zoom);\r\n      } else {\r\n        bounds = new L.LatLngBounds(markersArray);\r\n        map.fitBounds(bounds);\r\n      }\r\n    }\r\n  }\r\n\r\n  function resizeMap() {\r\n    if (map) {\r\n      map.invalidateSize();\r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .map {\r\n    height: inherit;\r\n    width: inherit;\r\n  }\r\n</style>\r\n\r\n<svelte:window on:resize={resizeMap} />\r\n\r\n<div class=\"map\" id={mapID} bind:this={mapID} />\r\n\r\n<LoadSdk on:ready={initialise} />\r\n",
    "<script>\r\n\timport Map from \"@anoram/leaflet-svelte\";\r\n\tconst CORS = \"https://cors.anoram.workers.dev/?\";\r\n\tconst URL = \"http://api.open-notify.org/iss-now.json\";\r\n\tconst passes = \"http://api.open-notify.org/iss-pass.json?alt=20&n=5&\";\r\n\r\n\tlet lat, lng;\r\n\tlet options = {\r\n\t\tzoom: 2,\r\n\t\tcenter: [0, 0],\r\n\t\tmapID: \"map\",\r\n\t\ttilelayers: [\r\n\t\t\t{\r\n\t\t\t\turl:\r\n\t\t\t\t\t\"https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png\",\r\n\t\t\t\tattribution:\r\n\t\t\t\t\t'&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors &copy; <a href=\"https://carto.com/attributions\">CARTO</a>',\r\n\t\t\t\tsubdomains: \"abcd\",\r\n\t\t\t\tmaxZoom: 19,\r\n\t\t\t},\r\n\t\t],\r\n\t};\r\n\t\r\n\tasync function getISS() {\r\n\t\tlet data = await fetch(`${CORS}${URL}`);\r\n\t\tlet res = await data.json();\r\n\t\tlat = res.iss_position.latitude;\r\n\t\tlng = res.iss_position.longitude;\r\n\t\treturn {\r\n\t\t\tlat,\r\n\t\t\tlng,\r\n\t\t};\r\n\t}\r\n\tlet MAP_EL;\r\n\r\n\tasync function init() {\r\n\t\t(async function fn() {\r\n\t\t\tlet latlng = await getISS();\r\n\t\t\tlet marker = {\r\n\t\t\t\tlat: latlng.lat,\r\n\t\t\t\tlng: latlng.lng,\r\n\t\t\t\ticon: {\r\n\t\t\t\t\ticonUrl: \"./favicon.png\",\r\n\t\t\t\t\ticonSize: [48, 48],\r\n\t\t\t\t},\r\n\t\t\t};\r\n\t\t\tMAP_EL.updateMarkers({\r\n\t\t\t\tmarkers: [marker],\r\n\t\t\t});\r\n\t\t\tsetTimeout(fn, 5000);\r\n\t\t})();\r\n\t}\r\n\tlet warntext =\r\n\t\t\"Please allow location access to know when ISS will pass your location.\";\r\n\tfunction getLocation() {\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(showPosition);\r\n\t\t} else {\r\n\t\t\tconsole.warn(\r\n\t\t\t\t\"Geolocation is not supported by this browser / Not shared\"\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\tfunction showPosition(position) {\r\n\t\tfetchPasses(position.coords.latitude, position.coords.longitude);\r\n\t}\r\n\tgetLocation();\r\n\tlet ISSPass = \"\";\r\n\tasync function fetchPasses(lt, ln) {\r\n\t\twarntext = \"loading...\";\r\n\t\tconst res = await fetch(`${CORS}${passes}lat=${lt}&lon=${ln}`).then(\r\n\t\t\tasync (data) => {\r\n\t\t\t\tlet d = await data.json();\r\n\t\t\t\tISSPass = await d.response;\r\n\t\t\t\twarntext = \"Check below for the passes!\";\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.map {\r\n\t\theight: 600px;\r\n\t\twidth: auto;\r\n\t}\r\n</style>\r\n\r\n<div class=\"map\">\r\n\t<Map {options} bind:this={MAP_EL} on:ready={init} />\r\n</div>\r\n<main class=\"text-center\">\r\n\t<p class=\"latlon\">\r\n\t\tCurrent location:\r\n\t\t{lat ?? 'loading'},\r\n\t\t{lng ?? 'loading'}\r\n\t\t(updates 15s once)\r\n\t</p>\r\n\t<p>{warntext}</p>\r\n\t<ul>\r\n\t\t{#each ISSPass as item}\r\n\t\t\t<li class=\"pass\">\r\n\t\t\t\t{new Date(item.risetime * 1000).toLocaleString()}\r\n\t\t\t\t<br />\r\n\t\t\t</li>\r\n\t\t{/each}\r\n\t</ul>\r\n\t<h3 class=\"sign\">\r\n\t\tISS üõ∞Ô∏è tracker with\r\n\t\t<svg\r\n\t\t\tid=\"svelte\"\r\n\t\t\txmlns=\"http://www.w3.org/2000/svg\"\r\n\t\t\twidth=\"300\"\r\n\t\t\theight=\"80\"\r\n\t\t\tviewBox=\"0 0 519 139\">\r\n\t\t\t<path\r\n\t\t\t\tid=\"logotype\"\r\n\t\t\t\tfill=\"#4a4a55\"\r\n\t\t\t\td=\"M172.39,100.41a24.1,24.1,0,0,1-13.72-3.87,19.86,19.86,0,0,1-8-10.61L159,82.86a15.4,15.4,0,0,0,5.45,6.6,14.37,14.37,0,0,0,8.27,2.43,12.14,12.14,0,0,0,7.88-2.38,8.29,8.29,0,0,0,2.94-6.82,7.43,7.43,0,0,0-.81-3.45,10.32,10.32,0,0,0-1.83-2.6,12.36,12.36,0,0,0-3.16-2.09c-1.42-.71-2.59-1.25-3.53-1.62s-2.32-.87-4.13-1.49c-2.28-.8-4-1.42-5.12-1.88a37.86,37.86,0,0,1-4.47-2.25,16.37,16.37,0,0,1-4.18-3.16A15.43,15.43,0,0,1,153.81,60a14.77,14.77,0,0,1,4-16.79q5.12-4.51,13.89-4.51,7.34,0,12.06,3.23a15.63,15.63,0,0,1,6.35,8.61l-8.18,2.73a9.57,9.57,0,0,0-4-4.39A13.3,13.3,0,0,0,171,47.24a10.7,10.7,0,0,0-6.69,1.87,6.28,6.28,0,0,0-2.42,5.29,5.52,5.52,0,0,0,1.87,4.09,13,13,0,0,0,3.92,2.64c1.36.57,3.44,1.33,6.22,2.3,1.7.63,3,1.09,3.79,1.41s2,.83,3.62,1.57a25.79,25.79,0,0,1,3.67,2,34.36,34.36,0,0,1,3,2.43,12.86,12.86,0,0,1,2.6,3.11,17.06,17.06,0,0,1,1.53,3.84,17.42,17.42,0,0,1,.64,4.81q0,8.36-5.71,13.08T172.39,100.41Zm54.62-1L206.56,39.74h9.54l13.55,41.58a66.19,66.19,0,0,1,1.88,6.82,63.43,63.43,0,0,1,1.87-6.82l13.38-41.58h9.46L235.87,99.39Zm47.29,0V39.74h37v8.35H283.17V64.45h18.15V72.8H283.17V91h30v8.35Zm61.44,0V39.74h8.87V90.87h29.14v8.52Zm71.41-51.13V99.39h-8.86V48.26H381.42V39.74H424v8.52Zm35.2,51.13V39.74h37v8.35H451.21V64.45h18.15V72.8H451.21V91h30v8.35Z\" />\r\n\t\t\t<path\r\n\t\t\t\tid=\"back\"\r\n\t\t\t\tfill=\"#ff3e00\"\r\n\t\t\t\td=\"M110.23,28.39C99.83,13.51,79.29,9.1,64.44,18.56L38.36,35.18a29.9,29.9,0,0,0-13.52,20,31.53,31.53,0,0,0,3.1,20.24,29.94,29.94,0,0,0-4.47,11.18,31.86,31.86,0,0,0,5.45,24.12c10.4,14.88,30.94,19.29,45.79,9.83L100.79,104a30,30,0,0,0,13.52-20,31.52,31.52,0,0,0-3.11-20.23,30.13,30.13,0,0,0,4.48-11.18,31.9,31.9,0,0,0-5.45-24.12\" />\r\n\t\t\t<path\r\n\t\t\t\tid=\"front\"\r\n\t\t\t\tfill=\"#fff\"\r\n\t\t\t\td=\"M61.89,112.16a20.73,20.73,0,0,1-22.24-8.25,19.14,19.14,0,0,1-3.27-14.5A17,17,0,0,1,37,87l.49-1.5,1.34,1A33.78,33.78,0,0,0,49,91.56l1,.29-.09,1A5.9,5.9,0,0,0,51,96.7a6.25,6.25,0,0,0,6.7,2.48,5.85,5.85,0,0,0,1.6-.7L85.34,81.86a5.42,5.42,0,0,0,2.45-3.64,5.77,5.77,0,0,0-1-4.37,6.25,6.25,0,0,0-6.7-2.48,5.72,5.72,0,0,0-1.6.7l-10,6.35a19.1,19.1,0,0,1-5.29,2.32A20.72,20.72,0,0,1,41,72.5,19.16,19.16,0,0,1,37.75,58a18,18,0,0,1,8.13-12.06L72,29.32A19.05,19.05,0,0,1,77.26,27a20.71,20.71,0,0,1,22.23,8.25,19.14,19.14,0,0,1,3.28,14.5,20.15,20.15,0,0,1-.62,2.43l-.5,1.5-1.33-1a33.78,33.78,0,0,0-10.2-5.1l-1-.29.09-1a5.86,5.86,0,0,0-1.06-3.88A6.23,6.23,0,0,0,81.49,40a5.72,5.72,0,0,0-1.6.7L53.8,57.29a5.45,5.45,0,0,0-2.45,3.63,5.84,5.84,0,0,0,1,4.38A6.25,6.25,0,0,0,59,67.78a6,6,0,0,0,1.6-.7l10-6.34a18.61,18.61,0,0,1,5.3-2.33,20.7,20.7,0,0,1,22.23,8.24,19.16,19.16,0,0,1,3.28,14.5,18,18,0,0,1-8.13,12.06L67.19,109.83a19.18,19.18,0,0,1-5.3,2.33\" />\r\n\t\t</svg>\r\n\t</h3>\r\n</main>\r\n<footer class=\"text-center\">\r\n\t<span>from</span>\r\n\t<a href=\"https://anoram.com\">Anoram</a>\r\n</footer>\r\n"
  ],
  "names": [],
  "mappings": "AAmNE,IAAI,eAAC,CAAC,AACJ,MAAM,CAAE,OAAO,CACf,KAAK,CAAE,OAAO,AAChB,CAAC;ACrIF,IAAI,cAAC,CAAC,AACL,MAAM,CAAE,KAAK,CACb,KAAK,CAAE,IAAI,AACZ,CAAC"
}